version: '3.2'

services:
  coordinator:
    container_name: coordinator
    image: "pl.battleships/vue-coordinator"
    depends_on:
      - redteam
      - blueteam
    build: coordinator/vueCoordinator
    ports:
      - 8080:80

  blueteam:
    image: pl.battleships/java-spring-ship
    build: javaSpringShip/
    container_name: javaspringship
    ports:
      - 8050:8050
      - 8150:8150
    environment:
      SERVER_PORT: 8050
      GEAM_TEAM: blue
      GAME_OPPONENTURL: http://redteam:8051
      GAME_SLEEP: 50
     

  redteam:
    image: pl.battleships/java-quarkus-ship
    build: 
      context: javaQuarkusShip
      dockerfile: Dockerfile.native
    container_name: javaquarkusship
    ports:
      - 8051:8051
      - 8151:8151
    environment:
      QUARKUS_HTTP_PORT: 8051
      GEAM_TEAM: red
      QUARKUS_REST_CLIENT_GAME_URL: http://blueteam:8050
      GAME_SLEEP: 50


